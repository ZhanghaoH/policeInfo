<!DOCTYPE html>
<html lang="zh-cmn-Hans">

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width,initial-scale=1,user-scalable=0">
  <title>信息绑定</title>
  <link rel="stylesheet" href="../css/weui.css" />
  <link rel="stylesheet" href="../css/common.css" />
</head>

<body>
  <div class="weui-toptips weui-toptips_warn js_tooltips tips-hide" id="errInfo">错误提示</div>
  <div class="weui-cells weui-cells_form" style="margin-top: 25px">
    <div class="weui-cell">
      <div class="weui-cell__hd">
        <label class="weui-label">身份证号</label>
      </div>
      <div class="weui-cell__bd">
        <input class="weui-input" type="text" id="idCard" name="idCard" placeholder="请输入身份证号">
      </div>
    </div>
    <div class="weui-cell">
      <div class="weui-cell__hd">
        <label class="weui-label">警号</label>
      </div>
      <div class="weui-cell__bd">
        <input class="weui-input" type="number" id="policeNum" name="policeNum" placeholder="请输入警号">
      </div>
    </div>
    <div class="weui-cell">
      <div class="weui-cell__hd">
        <label class="weui-label">姓名</label>
      </div>
      <div class="weui-cell__bd">
        <input class="weui-input" type="text" id="name" name="name" placeholder="请输入姓名">
      </div>
    </div>
  </div>
  <div class="btn-wr">
    <a href="javascript:;" class="weui-btn weui-btn_primary" id="btnBind">绑定</a>
  </div>
</body>
<script src="../js/jquery.min.js"></script>
<script>
  $(function () {
    var errInfo = $("#errInfo")
    var REGID = new RegExp(
      "^((1[1-5])|(2[1-3])|(3[1-7])|(4[1-6])|(5[0-4])|(6[1-5])|71|(8[12])|91)\\d{4}(((19|20)\\d{2}(0[13-9]|1[012])(0[1-9]|[12]\\d|30))|((19|20)\\d{2}(0[13578]|1[02])31)|((19|20)\\d{2}02(0[1-9]|1\\d|2[0-8]))|((19|20)([13579][26]|[2468][048]|0[048])0229))\\d{3}(\\d|X|x)?$"
    );
    $("#btnBind").on("touchstart", function () {
      var idCard = $('input[name="idCard"]').val().replace(/\s/g, '')
      var ploliceNum = $('input[name="policeNum"]').val().replace(/\s/g, '')
      var name = $('input[name="name"]').val().replace(/\s/g, '')
      var isidCard = REGID.exec(idCard);
      // console.log(idCard);
      // console.log(ploliceNum);
      // console.log(name);
      // console.log(!isidCard);
      if (!isidCard) {
        // TODO:身份证号错误
        errTips("身份证号错误")
      } else if (ploliceNum == "") {
        // TODO:警号为空
        errTips("警号为空！")
      } else if (name == "") {
        // TODO:姓名为空
        errTips("姓名为空")
      } else {
        // TODO: BIND
        window.location.assign("./login.html")
      }
    })

    function errTips(err) {
      errInfo.text(err)
      errInfo.removeClass("tips-hide")
      setTimeout(function () {
        errInfo.addClass("tips-hide")
      }, 1500)
    }
  })
</script>

</html>